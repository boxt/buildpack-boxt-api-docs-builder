#!/bin/sh

# bin/compile BUILD_DIR CACHE_DIR ENV_DIR
BUILD_DIR=$1
CACHE_DIR=$2
ENV_DIR=$3

cd $BUILD_DIR

export RAILS_ENV=test
# echo "DATABASE_URL:$DATABASE_URL"
# export DATABASE_URL=`cat $ENV_DIR/DATABASE_URL`
# export RAILS_ENV=`cat $ENV_DIR/RAILS_ENV`
# export DIR="$( cd "$( dirname "${BASH_SOURCE[0]}" )" >/dev/null 2>&1 && pwd )"

# echo "DATABASE_URL:$DATABASE_URL"

# echo "ENV: $RAILS_ENV" >> public/gavin-test.txt
# echo "DIR: $DIR"

bin/rails docs:api:build -- --api-class-name=V2::API --build-dir="$BUILD_DIR/pubic/api-docs"

exit 0
